(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,82645,e=>{"use strict";var t=e.i(47167),s=e.i(43476),i=e.i(71645),l=e.i(22016);let a=t.default.env.NEXT_PUBLIC_API_BASE||"http://localhost:5001";function r(){let[e,t]=(0,i.useState)([]),[r,d]=(0,i.useState)(!0),[n,c]=(0,i.useState)(""),o=localStorage.getItem("token");(0,i.useEffect)(()=>{if(!o){window.location.href="/login";return}m()},[o]);let m=async()=>{try{let e=await fetch(`${a}/api/user/meals`,{headers:{Authorization:`Bearer ${o}`}}),s=await e.json();t(Array.isArray(s)?s:s.meals||[])}catch(e){c("Failed to load meals"),console.error(e)}finally{d(!1)}},x=async s=>{if(confirm("Delete this meal?"))try{if(!(await fetch(`${a}/api/user/meals/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${o}`}})).ok)throw Error("Failed to delete");t(e.filter(e=>e.id!==s))}catch(e){c(e.message)}};if(r)return(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"inline-flex items-center gap-2",children:[(0,s.jsx)("div",{className:"animate-spin",children:"â³"}),(0,s.jsx)("span",{className:"text-white/70",children:"Loading meals..."})]})});let h=e.reduce((e,t)=>e+(Number(t.calories)||0),0);return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-white",children:"ðŸ½ï¸ Meals"}),(0,s.jsx)("p",{className:"text-white/60 mt-2",children:"Track your daily meals and calories"})]}),(0,s.jsx)(l.default,{href:"/meals/new",className:"rounded-lg bg-indigo-500 hover:bg-indigo-400 px-6 py-3 text-sm font-semibold transition duration-200",children:"+ Add Meal"})]}),n&&(0,s.jsx)("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 px-4 py-3 text-sm",children:(0,s.jsxs)("p",{className:"text-red-200 font-medium",children:["âš ï¸ ",n]})}),e.length>0&&(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,s.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 backdrop-blur-sm p-6",children:[(0,s.jsx)("p",{className:"text-sm text-white/60 font-medium",children:"Total Meals"}),(0,s.jsx)("p",{className:"mt-2 text-3xl font-bold",children:e.length})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 backdrop-blur-sm p-6",children:[(0,s.jsx)("p",{className:"text-sm text-white/60 font-medium",children:"Total Calories"}),(0,s.jsx)("p",{className:"mt-2 text-3xl font-bold text-indigo-400",children:h})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 backdrop-blur-sm p-6",children:[(0,s.jsx)("p",{className:"text-sm text-white/60 font-medium",children:"Avg per Meal"}),(0,s.jsx)("p",{className:"mt-2 text-3xl font-bold text-blue-400",children:Math.round(h/e.length)})]})]}),(0,s.jsx)("div",{className:"rounded-2xl border border-white/10 bg-white/5 backdrop-blur-sm p-6",children:0===e.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,s.jsx)("div",{className:"text-4xl mb-3",children:"ðŸ½ï¸"}),(0,s.jsx)("p",{className:"text-white/70 font-medium mb-2",children:"No meals logged yet"}),(0,s.jsx)("p",{className:"text-white/50 text-sm mb-4",children:"Start tracking by adding your first meal"}),(0,s.jsx)(l.default,{href:"/meals/new",className:"rounded-lg bg-indigo-500 hover:bg-indigo-400 px-4 py-2 text-sm font-semibold transition",children:"+ Add First Meal"})]}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-white/10",children:[(0,s.jsx)("th",{className:"text-left px-4 py-3 text-white/60 font-medium",children:"Meal Name"}),(0,s.jsx)("th",{className:"text-left px-4 py-3 text-white/60 font-medium",children:"Calories"}),(0,s.jsx)("th",{className:"text-left px-4 py-3 text-white/60 font-medium",children:"Date"}),(0,s.jsx)("th",{className:"text-right px-4 py-3 text-white/60 font-medium",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-white/5",children:e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-white/5 transition",children:[(0,s.jsx)("td",{className:"px-4 py-3 font-medium",children:e.name||"Untitled Meal"}),(0,s.jsxs)("td",{className:"px-4 py-3 text-indigo-400 font-semibold",children:[e.calories||0," kcal"]}),(0,s.jsx)("td",{className:"px-4 py-3 text-white/60 text-sm",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"-"}),(0,s.jsxs)("td",{className:"px-4 py-3 text-right flex gap-2 justify-end",children:[(0,s.jsx)("button",{className:"text-indigo-400 hover:text-indigo-300 text-xs font-medium transition",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>x(e.id),className:"text-red-400 hover:text-red-300 text-xs font-medium transition",children:"Delete"})]})]},e.id))})]})})})]})}e.s(["default",()=>r])}]);