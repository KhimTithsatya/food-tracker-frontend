{"version":3,"sources":["../../../../src/app/%28user%29/profile/profilepage.jsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\n\nconst API_BASE = process.env.NEXT_PUBLIC_API_BASE || \"http://localhost:5001\";\n\nexport default function ProfilePage() {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [editing, setEditing] = useState(false);\n  const [formData, setFormData] = useState({});\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n\n  const token =\n    typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null;\n\n  useEffect(() => {\n    if (!token) {\n      window.location.href = \"/login\";\n      return;\n    }\n\n    fetchProfile();\n  }, [token]);\n\n  const fetchProfile = async () => {\n    try {\n      const userData = localStorage.getItem(\"user\");\n      if (userData) {\n        const parsed = JSON.parse(userData);\n        setUser(parsed);\n        setFormData(parsed);\n      }\n    } catch (err) {\n      setError(\"Failed to load profile\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n    setSuccess(\"\");\n\n    try {\n      const res = await fetch(`${API_BASE}/api/user/profile`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(formData),\n      });\n\n      if (!res.ok) throw new Error(\"Failed to update profile\");\n\n      const updated = await res.json();\n      setUser(updated);\n      localStorage.setItem(\"user\", JSON.stringify(updated));\n      setSuccess(\"Profile updated successfully!\");\n      setEditing(false);\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"inline-flex items-center gap-2\">\n          <div className=\"animate-spin\">‚è≥</div>\n          <span className=\"text-white/70\">Loading profile...</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-2xl mx-auto space-y-8\">\n      <div>\n        <h1 className=\"text-4xl font-bold text-white\">üë§ My Profile</h1>\n        <p className=\"text-white/60 mt-2\">Manage your account settings and preferences</p>\n      </div>\n\n      {error && (\n        <div className=\"p-4 rounded-lg bg-red-500/10 border border-red-500/30 text-red-200 text-sm font-medium\">\n          ‚ö†Ô∏è {error}\n        </div>\n      )}\n\n      {success && (\n        <div className=\"p-4 rounded-lg bg-green-500/10 border border-green-500/30 text-green-200 text-sm font-medium\">\n          ‚úì {success}\n        </div>\n      )}\n\n      <div className=\"rounded-2xl border border-white/10 bg-white/5 backdrop-blur-sm p-8\">\n        {editing ? (\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-white/70 mb-2\">\n                Full Name\n              </label>\n              <input\n                className=\"w-full px-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition\"\n                type=\"text\"\n                value={formData.name || \"\"}\n                onChange={(e) =>\n                  setFormData({ ...formData, name: e.target.value })\n                }\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-white/70 mb-2\">\n                Email Address\n              </label>\n              <input\n                className=\"w-full px-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition\"\n                type=\"email\"\n                value={formData.email || \"\"}\n                onChange={(e) =>\n                  setFormData({ ...formData, email: e.target.value })\n                }\n              />\n            </div>\n\n            <div className=\"flex gap-3 pt-4\">\n              <button\n                type=\"submit\"\n                className=\"flex-1 bg-indigo-500 hover:bg-indigo-400 text-white py-2 rounded-lg font-medium transition duration-200\"\n              >\n                Save Changes\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  setEditing(false);\n                  setFormData(user);\n                  setError(\"\");\n                }}\n                className=\"flex-1 bg-white/5 hover:bg-white/10 text-white py-2 rounded-lg font-medium border border-white/20 transition duration-200\"\n              >\n                Cancel\n              </button>\n            </div>\n          </form>\n        ) : (\n          <div className=\"space-y-6\">\n            <div className=\"pb-6 border-b border-white/10\">\n              <p className=\"text-sm text-white/60 font-medium uppercase tracking-wide\">Full Name</p>\n              <p className=\"text-2xl font-semibold text-white mt-2\">{user?.name || \"Not Set\"}</p>\n            </div>\n\n            <div className=\"pb-6 border-b border-white/10\">\n              <p className=\"text-sm text-white/60 font-medium uppercase tracking-wide\">Email Address</p>\n              <p className=\"text-lg text-indigo-300 mt-2 font-medium\">{user?.email || \"Not Set\"}</p>\n            </div>\n\n            <div className=\"pb-6 border-b border-white/10\">\n              <p className=\"text-sm text-white/60 font-medium uppercase tracking-wide\">Account Role</p>\n              <div className=\"flex items-center gap-2 mt-2\">\n                <span className=\"px-3 py-1 rounded-full bg-blue-500/20 border border-blue-500/30 text-blue-300 text-sm font-semibold capitalize\">\n                  {user?.role?.toLowerCase() || \"User\"}\n                </span>\n              </div>\n            </div>\n\n            <div className=\"pt-4\">\n              <button\n                onClick={() => setEditing(true)}\n                className=\"w-full bg-indigo-500 hover:bg-indigo-400 text-white py-2 rounded-lg font-medium transition duration-200\"\n              >\n                ‚úèÔ∏è Edit Profile\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Account Info Card */}\n      <div className=\"rounded-2xl border border-white/10 bg-white/5 backdrop-blur-sm p-6\">\n        <h3 className=\"text-lg font-semibold text-white mb-4\">Account Information</h3>\n        <div className=\"space-y-3 text-sm\">\n          <p className=\"text-white/70\">\n            <span className=\"text-white/60\">Account Status:</span> <span className=\"text-green-400 font-medium\">Active</span>\n          </p>\n          <p className=\"text-white/70\">\n            <span className=\"text-white/60\">Member Since:</span> <span className=\"text-white\">{new Date().toLocaleDateString()}</span>\n          </p>\n          <p className=\"text-white/70\">\n            <span className=\"text-white/60\">Last Updated:</span> <span className=\"text-white\">Just now</span>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}