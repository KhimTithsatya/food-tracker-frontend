{"version":3,"sources":["../../../../src/app/%28user%29/meals/mealpage.jsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\n\nconst API_BASE = process.env.NEXT_PUBLIC_BACKEND_URL || \"http://localhost:5001\";\n\nexport default function MealPage() {\n  const [meals, setMeals] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n\n  const token =\n    typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null;\n\n  useEffect(() => {\n    if (!token) {\n      window.location.href = \"/login\";\n      return;\n    }\n\n    fetchMeals();\n  }, [token]);\n\n  const fetchMeals = async () => {\n    try {\n      const res = await fetch(`${API_BASE}/api/meals`, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      const data = await res.json();\n      setMeals(Array.isArray(data) ? data : []);\n    } catch (err) {\n      setError(\"Failed to load meals\");\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteMeal = async (id) => {\n    if (!confirm(\"Delete this meal?\")) return;\n\n    try {\n      const res = await fetch(`${API_BASE}/api/meals/${id}`, {\n        method: \"DELETE\",\n        headers: { Authorization: `Bearer ${token}` },\n      });\n\n      if (!res.ok) throw new Error(\"Failed to delete\");\n      setMeals(meals.filter((m) => m.id !== id));\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-lg text-gray-600\">Loading meals...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-4xl font-bold text-gray-900\">Meals</h1>\n        <p className=\"text-gray-600 mt-2\">Track your daily meals and calories</p>\n      </div>\n\n      {error && (\n        <div className=\"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg\">\n          {error}\n        </div>\n      )}\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {meals.length === 0 ? (\n          <div className=\"col-span-full bg-white rounded-lg shadow-md p-8 text-center text-gray-600\">\n            <p className=\"text-lg\">No meals tracked yet. Start logging your meals!</p>\n          </div>\n        ) : (\n          meals.map((meal) => (\n            <div key={meal.id} className=\"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition\">\n              <div className=\"flex justify-between items-start mb-4\">\n                <div>\n                  <h3 className=\"text-lg font-bold text-gray-900\">{meal.name}</h3>\n                  <p className=\"text-sm text-gray-600 mt-1\">\n                    {new Date(meal.date).toLocaleDateString()}\n                  </p>\n                </div>\n                <button\n                  onClick={() => deleteMeal(meal.id)}\n                  className=\"text-red-600 hover:text-red-800 font-medium text-sm\"\n                >\n                  Delete\n                </button>\n              </div>\n\n              <div className=\"space-y-2 border-t pt-4\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Calories:</span>\n                  <span className=\"font-semibold text-gray-900\">\n                    {meal.calories || 0} kcal\n                  </span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Protein:</span>\n                  <span className=\"font-semibold text-gray-900\">\n                    {meal.protein || 0}g\n                  </span>\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"uDAEA,EAAA,EAAA,CAAA,CAAA,OAEA,IAAM,EAAW,QAAQ,GAAG,CAAC,uBAAuB,EAAI,wBAEzC,SAAS,IACtB,GAAM,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,EAAE,EAC/B,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAKnC,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAEN,OAAO,QAAQ,CAAC,IAAI,CAAG,QAK3B,EAAG,CAT+D,KASxD,EAiBV,IAAM,EAAa,MAAO,IACxB,GAAK,CAAD,OAAS,qBAEb,CAFmC,EAE/B,CAMF,GAAI,CAAC,CALO,MAAM,MAAM,CAAA,EAAG,EAAS,WAAW,EAAE,EAAA,CAAI,CAAE,CACrD,OAAQ,SACR,QAAS,CAAE,cAAe,CAAC,OAAO,EAAE,GAAQ,CAC9C,EAAA,CAD6C,CAGpC,EAAE,CAAE,MAAM,AAAI,MAAM,oBAC7B,EAAS,EAAM,MAAM,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,GACxC,CAAE,MAAO,EAAK,CACZ,EAAS,EAAI,OAAO,CACtB,CACF,SAEA,AAAI,EAEA,CAAA,EAAA,EAAA,EAFS,CAET,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,uBAM3C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,4CAAmC,UACjD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8BAAqB,2CAGnC,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uEACZ,IAIL,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gEACK,IAAjB,EAAM,MAAM,CACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qFACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mBAAU,sDAGzB,EAAM,GAAG,CAAC,AAAC,GACT,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAkB,UAAU,yEAC3B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2CAAmC,EAAK,IAAI,GAC1D,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCACV,IAAI,KAAK,EAAK,IAAI,EAAE,kBAAkB,QAG3C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAW,EAAK,EAAE,EACjC,UAAU,+DACX,cAKH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yBAAgB,cAChC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,wCACb,EAAK,QAAQ,EAAI,EAAE,cAGxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yBAAgB,aAChC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,wCACb,EAAK,OAAO,EAAI,EAAE,eA1BjB,EAAK,EAAE,OAoC7B"}