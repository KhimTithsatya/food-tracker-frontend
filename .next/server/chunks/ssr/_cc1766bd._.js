module.exports=[9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},95347,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(72131),e=a.i(75003);let f=process.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:5001";function g(){let[a,g]=(0,d.useState)(""),[h,i]=(0,d.useState)(""),[j,k]=(0,d.useState)(""),[l,m]=(0,d.useState)(!1),n=async b=>{b.preventDefault(),k(""),m(!0);try{let b=await (0,e.signIn)("credentials",{redirect:!1,email:a,password:h});if(b?.error)return void k("Invalid email or password");let c=await fetch(`${f}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:h})}),d=await c.json();if(c.ok){localStorage.setItem("token",d.token),localStorage.setItem("user",JSON.stringify(d.user)),localStorage.setItem("role",d.user?.role||"USER");let a=String(d.user?.role||"USER").toUpperCase();console.log("User role:",d.user?.role,"Normalized:",a),"ADMIN"===a?window.location.href="/admin":window.location.href="/dashboard";return}window.location.href="/dashboard"}catch(a){console.error(a),k("Server not responding")}finally{m(!1)}},o=async a=>{k("");let b=await (0,e.signIn)(a,{callbackUrl:"/dashboard"});b?.error&&k("Social login failed or not configured.")};return(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-800 flex items-center justify-center p-6",children:(0,b.jsxs)("div",{className:"w-full max-w-md rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl shadow-2xl p-6",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Welcome back"}),(0,b.jsx)("p",{className:"text-sm text-white/70 mt-1",children:"Sign in to continue."})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:()=>o("google"),className:"rounded-xl bg-white/10 hover:bg-white/15 text-white px-4 py-3 border border-white/10 transition",children:"Google"}),(0,b.jsx)("button",{type:"button",onClick:()=>o("github"),className:"rounded-xl bg-white/10 hover:bg-white/15 text-white px-4 py-3 border border-white/10 transition",children:"GitHub"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 my-6",children:[(0,b.jsx)("div",{className:"h-px bg-white/10 flex-1"}),(0,b.jsx)("span",{className:"text-xs text-white/60",children:"or continue with email"}),(0,b.jsx)("div",{className:"h-px bg-white/10 flex-1"})]}),j&&(0,b.jsx)("div",{className:"rounded-xl border border-red-500/30 bg-red-500/10 px-4 py-3 text-sm text-red-200 mb-4",children:j}),(0,b.jsxs)("form",{onSubmit:n,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm text-white/80",children:"Email"}),(0,b.jsx)("input",{className:"w-full rounded-xl bg-black/30 border border-white/10 text-white px-4 py-3 outline-none focus:ring-2 focus:ring-white/20",placeholder:"you@example.com",value:a,onChange:a=>g(a.target.value),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm text-white/80",children:"Password"}),(0,b.jsx)("input",{className:"w-full rounded-xl bg-black/30 border border-white/10 text-white px-4 py-3 outline-none focus:ring-2 focus:ring-white/20",type:"password",placeholder:"••••••••",value:h,onChange:a=>i(a.target.value),required:!0})]}),(0,b.jsx)("button",{disabled:l,className:"w-full rounded-xl bg-indigo-500 hover:bg-indigo-400 text-white px-4 py-3 font-semibold transition disabled:opacity-60",children:l?"Signing in...":"Sign in"})]}),(0,b.jsxs)("p",{className:"text-sm text-white/70 mt-6",children:["Don't have an account?"," ",(0,b.jsx)(c.default,{className:"text-white underline",href:"/register",children:"Create one"})]})]})})}a.s(["default",()=>g])}];

//# sourceMappingURL=_cc1766bd._.js.map