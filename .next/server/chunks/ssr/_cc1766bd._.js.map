{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../src/app/login/page.jsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","\"use client\";\n\nimport Link from \"next/link\";\nimport { useState } from \"react\";\nimport { signIn } from \"next-auth/react\";\n\nconst API_BASE = process.env.NEXT_PUBLIC_BACKEND_URL || \"http://localhost:5001\";\n\nexport default function LoginPage() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n    setLoading(true);\n\n    try {\n      // Use NextAuth credentials (still hits your backend)\n      const res = await signIn(\"credentials\", {\n        redirect: false,\n        email,\n        password,\n      });\n\n      if (res?.error) {\n        setError(\"Invalid email or password\");\n        return;\n      }\n\n      // Also store backend token/user for your existing API calls (optional)\n      const apiRes = await fetch(`${API_BASE}/api/auth/login`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ email, password }),\n      });\n\n      const data = await apiRes.json();\n      if (apiRes.ok) {\n        localStorage.setItem(\"token\", data.token);\n        localStorage.setItem(\"user\", JSON.stringify(data.user));\n        localStorage.setItem(\"role\", data.user?.role || \"USER\");\n\n        const role = String(data.user?.role || \"USER\").toUpperCase();\n        console.log(\"User role:\", data.user?.role, \"Normalized:\", role);\n        \n        if (role === \"ADMIN\") {\n          window.location.href = \"/admin\";\n        } else {\n          window.location.href = \"/dashboard\";\n        }\n        return;\n      }\n\n      // If backend login failed but next-auth succeeded (unlikely), still go user\n      window.location.href = \"/dashboard\";\n    } catch (err) {\n      console.error(err);\n      setError(\"Server not responding\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSocial = async (provider) => {\n    setError(\"\");\n    const result = await signIn(provider, { callbackUrl: \"/dashboard\" });\n    if (result?.error) setError(\"Social login failed or not configured.\");\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-800 flex items-center justify-center p-6\">\n      <div className=\"w-full max-w-md rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl shadow-2xl p-6\">\n        <div className=\"mb-6\">\n          <h1 className=\"text-2xl font-bold text-white\">Welcome back</h1>\n          <p className=\"text-sm text-white/70 mt-1\">Sign in to continue.</p>\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-3\">\n          <button\n            type=\"button\"\n            onClick={() => handleSocial(\"google\")}\n            className=\"rounded-xl bg-white/10 hover:bg-white/15 text-white px-4 py-3 border border-white/10 transition\"\n          >\n            Google\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => handleSocial(\"github\")}\n            className=\"rounded-xl bg-white/10 hover:bg-white/15 text-white px-4 py-3 border border-white/10 transition\"\n          >\n            GitHub\n          </button>\n        </div>\n\n        <div className=\"flex items-center gap-3 my-6\">\n          <div className=\"h-px bg-white/10 flex-1\" />\n          <span className=\"text-xs text-white/60\">or continue with email</span>\n          <div className=\"h-px bg-white/10 flex-1\" />\n        </div>\n\n        {error && (\n          <div className=\"rounded-xl border border-red-500/30 bg-red-500/10 px-4 py-3 text-sm text-red-200 mb-4\">\n            {error}\n          </div>\n        )}\n\n        <form onSubmit={handleLogin} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <label className=\"text-sm text-white/80\">Email</label>\n            <input\n              className=\"w-full rounded-xl bg-black/30 border border-white/10 text-white px-4 py-3 outline-none focus:ring-2 focus:ring-white/20\"\n              placeholder=\"you@example.com\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              required\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <label className=\"text-sm text-white/80\">Password</label>\n            <input\n              className=\"w-full rounded-xl bg-black/30 border border-white/10 text-white px-4 py-3 outline-none focus:ring-2 focus:ring-white/20\"\n              type=\"password\"\n              placeholder=\"••••••••\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              required\n            />\n          </div>\n\n          <button\n            disabled={loading}\n            className=\"w-full rounded-xl bg-indigo-500 hover:bg-indigo-400 text-white px-4 py-3 font-semibold transition disabled:opacity-60\"\n          >\n            {loading ? \"Signing in...\" : \"Sign in\"}\n          </button>\n        </form>\n\n        <p className=\"text-sm text-white/70 mt-6\">\n          Don&apos;t have an account?{\" \"}\n          <Link className=\"text-white underline\" href=\"/register\">\n            Create one\n          </Link>\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"names":["module","exports","require","vendored","AppRouterContext","ReactServerDOMTurbopackClient"],"mappings":"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","ignoreList":[0,1]}