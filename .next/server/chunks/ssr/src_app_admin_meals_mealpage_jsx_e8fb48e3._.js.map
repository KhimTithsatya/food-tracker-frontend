{"version":3,"sources":["../../../../src/app/admin/meals/mealpage.jsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\n\nconst API_BASE = process.env.NEXT_PUBLIC_BACKEND_URL || \"http://localhost:5001\";\n\nexport default function MealPage() {\n  const [meals, setMeals] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n\n  const token =\n    typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null;\n\n  useEffect(() => {\n    if (!token) {\n      window.location.href = \"/login\";\n      return;\n    }\n\n    fetchMeals();\n  }, [token]);\n\n  const fetchMeals = async () => {\n    try {\n      const res = await fetch(`${API_BASE}/api/meals`, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      const data = await res.json();\n      setMeals(Array.isArray(data) ? data : []);\n    } catch (err) {\n      setError(\"Failed to load meals\");\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteMeal = async (id) => {\n    if (!confirm(\"Delete this meal?\")) return;\n\n    try {\n      const res = await fetch(`${API_BASE}/api/meals/${id}`, {\n        method: \"DELETE\",\n        headers: { Authorization: `Bearer ${token}` },\n      });\n\n      if (!res.ok) throw new Error(\"Failed to delete\");\n      setMeals(meals.filter((m) => m.id !== id));\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-lg text-gray-600\">Loading meals...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold text-gray-900\">Meals</h1>\n        <p className=\"text-gray-600 mt-2\">All tracked meals across the platform</p>\n      </div>\n\n      {error && (\n        <div className=\"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg\">\n          {error}\n        </div>\n      )}\n\n      <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n        {meals.length === 0 ? (\n          <div className=\"p-8 text-center text-gray-600\">\n            <p className=\"text-lg\">No meals tracked yet.</p>\n          </div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className=\"bg-gray-50 border-b\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-sm font-semibold text-gray-700\">\n                    Meal Name\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-sm font-semibold text-gray-700\">\n                    Date\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-sm font-semibold text-gray-700\">\n                    Calories\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-sm font-semibold text-gray-700\">\n                    Actions\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y\">\n                {meals.map((meal) => (\n                  <tr key={meal.id} className=\"hover:bg-gray-50 transition\">\n                    <td className=\"px-6 py-4 text-sm font-medium text-gray-900\">\n                      {meal.name}\n                    </td>\n                    <td className=\"px-6 py-4 text-sm text-gray-600\">\n                      {new Date(meal.date).toLocaleDateString()}\n                    </td>\n                    <td className=\"px-6 py-4 text-sm text-gray-600\">\n                      {meal.calories || 0} kcal\n                    </td>\n                    <td className=\"px-6 py-4 text-sm\">\n                      <button\n                        onClick={() => deleteMeal(meal.id)}\n                        className=\"text-red-600 hover:text-red-800 font-medium\"\n                      >\n                        Delete\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}